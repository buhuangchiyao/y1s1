---
sidebar: auto
---
## 进程管理

### 进程、线程、程序

- 程序：指令的集合
- 进程
  - 具有一定的独立功能的**程序**在**某个数据集合**上的一次运行活动。
  - 程序执行的一个**实例**
  - **资源**分配的基本单位
  - **进程控制块PCB**描述进程的基本信息和运行状态，所谓的创建进程和撤销进程，都是指对 PCB 的操作。
- 线程
  - **进程中**一个相对独立的、可调度的执行单元。
  - **CPU调度和分配**的基本单位
  - 一个进程可以有多个线程，它们共享进程资源
- 进程和线程的区别和联系
  - 联系
    1. 一个线程只能属于一个进程，**一个进程可以有多个线程**，但**至少有一个线程**。
    2. **资源分配给进程**，同一进程的所有**线程共享该进程所有资源**
    3. **处理器分配给线程**，真正在处理机上运行的是线程
    4. 线程在执行过程中需要协作同步，不同进程的线程利用**消息通信的办法实现同步**
  - 区别
    1. 进程拥有资源，**线程不拥有资源**，但是线程可以访问所属进程的资源。
    2. 线程是独立调度的基本单位，在同一进程中，线程的切换不会引起进程切换，**从一个进程中的线程切换到另一个进程中的线程时，会引起进程切换**
    3. 进程创建、切换和撤销，系统都要为之分配或回收资源，**所需的系统开销大**，线程切换只需保存和设置少量寄存器内容，**开销很小**
    4. 一个进程挂掉了不会影响其他进程，而线程崩溃整个进程崩溃，所以**多进程比多线程健壮**

### 多线程和多进程

- 线程的实现方式

	- 用户级线程
	- 内核级线程

- 多线程模型

	- 多对一模型
	- 一对一模型
	- 多对多模型

### 进程状态的切换
- 进程状态转换图
<img src="./进程状态切换图.png">

- 就绪态(ready):进程已经获得除处理机以外的所需资源，等待分派处理机资源
- 运行态(running):占用处理机资源运行
- 阻塞态(waiting):等待某种条件

    1. 只有就绪态和运行态可以相互转换，其他都是单向转换。就绪态获得CPU资源就会进入运行态，而当运行态的进程用完分配给它的CPU时间就会进入就绪态
    2. 阻塞状态是缺少需要的资源从而由运行状态转换而来，但是该资源不包括 CPU 时间，缺少 CPU 时间会从运行态转换为就绪态。

### 进程调度（处理器调度）

- 概念：对处理器进行分配
- 调度方式

	- 非剥夺式调度
	- 剥夺式调度

- 三级调度

	- 作业调度（高级调度）： 分配除处理器外的资源

	- 内存调度（中级调度）：提高内存利用率、吞吐量

	- 进程调度（低级调度）：分配处理器；最基本的，不可或缺

- 调度算法

	- 先来先服务
	- 最短作业优先
	- 优先级调度
	- 高响应比优先
	- 时间片轮转

### 进程通信

- 概念：进程之间的信息交换
- 两种通信方法

	- 高级通信方法

		- 共享存储
		- 消息传递
		- 管道通信

	- 低级通信方法

		- 进程同步

			- 多个相互合作的进程在一些关键点上相互等待或交换信息。

		- 进程互斥

			- 当一个进程正在使用某资源时，其他希望使用该资源的进程必须等待

- 进程通信的方式

	- 管道
	- 消息队列
	- 信号量
	- 共享存储
	- socket套接字

- 进程同步

	- 核心：协调进程之间的相互制约关系（临界资源的管理）
	- 同步准则

		- 空闲让进
		- 忙则等待
		- 有限等待
		- 让权等待

			- 不能进入临界区时，立即释放处理器

	- 解决方法

		- 信号量机制：利用PV原语实现互斥和同步
		- 软、硬件实现

	- P、V原语

		- P：申请一个空间资源（信号量减1）
		- V：释放一个被占用的资源（信号量加1）

	- 几个典型的进程同步/互斥问题

		- 生产者-消费者问题
		- 读者-写者问题
		- 哲学家就餐问题

	- 管程

		- 概念：代表共享资源的数据结构，以及由对该共享数据结构实施操作的一组过程所组成的资源管理程序。
		- 意义：保证了进程互斥，无须程序员自己实现互斥。
